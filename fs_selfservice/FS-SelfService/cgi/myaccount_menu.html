<%= $url = "$selfurl?session=$session_id;action="; ''; %>
<TABLE BORDER=0><TR>
<TD VALIGN="top" HEIGHT="100%" BGCOLOR="#dddddd">

<TABLE CELLSPACING=0 BORDER=0 HEIGHT="100%">

<%= 

my @menu = (
{ title=>' ' },
{ title=>'Overview', url=>'myaccount', size=>'+1', },
{ title=>' ' },

{ title=>'Purchase', size=>'+1', },
  { title=>'Purchase additional package',
    url=>'customer_order_pkg', 'indent'=>2 },
);

if ( 1 ) { #XXXFIXME "enable selfservice prepay features" flag or something, eventually per-pkg or something really fancy

  push @menu, (
    { title=>'Recharge my account with a credit card',
      url=>'make_payment', indent=>2 },
    { title=>'Recharge my account with a check',
      url=>'make_ach_payment', indent=>2 },
    { title=>'Recharge my account with a prepaid card',
      url=>'recharge_prepay', indent=>2 },
  );

}

push @menu, (

{ title=>' ' },

{ title=>'View my usage', url=>'view_usage', size=>'+1', },
{ title=>'Setup my services', url=>'provision', size=>'+1', },

{ title=>' ' },

{ title=>'Change my information', size=>'+1', },
#  { title=>'Change payment information*', url=>'change_bill',     indent=>2 },
#  { title=>'Change service address*',     url=>'change_ship',     indent=>2 },
  { title=>'Change password(s)',          url=>'change_password', indent=>2 },

{ title=>' ' },

{ title=>'Logout',   url=>'logout', size=>'+1', },

);

foreach my $item ( @menu ) {

  $OUT .= '<TR><TD'; 
  if ( exists $item->{'url'} && $action eq $item->{'url'} ) {
    $OUT .= ' BGCOLOR="#eeeeee" '.
            ' STYLE="border-top: 1px solid black;'.
                   ' border-left: 1px solid black;'.
                   ' border-bottom: 1px solid black"';
  } else {
    $OUT .= ' STYLE="border-right: 1px solid black"';
  }
  $OUT.='>';

  $OUT .= '<FONT SIZE="'. $item->{'size'}. '">'
    if exists $item->{'size'};

  $OUT .= '&nbsp;' x $item->{'indent'}
    if exists $item->{'indent'};

  $OUT .= '<A HREF="'. $url. $item->{'url'}. '">'
    if exists $item->{'url'} && $action ne $item->{'url'};

  $item->{'title'} =~ s/ /&nbsp;/g;
  $OUT .= $item->{'title'};

  $OUT .= '</FONT>'
    if exists $item->{'size'};

  $OUT .= '</A>'
    if exists $item->{'url'} && $action ne $item->{'url'};

  $OUT .= '</TD></TR>';

}

%>

<TR><TD STYLE="border-right: 1px solid black" HEIGHT="100%"><BR><BR><BR><BR></TD></TR>

</TABLE>

</TD>
